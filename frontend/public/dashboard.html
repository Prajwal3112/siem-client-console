<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIEM Console - Dashboard</title>
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self'; connect-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:;">
    <link rel="stylesheet" href="../styles/main.css">
</head>

<body class="dashboard-bg">
    <div class="dashboard-container">
        <header class="taskbar">
            <div class="taskbar-left">
                <h1>SIEM Client Console</h1>
            </div>
            <div class="taskbar-right">
                <button id="refreshBtn" class="taskbar-btn" title="Refresh">
                    <span>⟳</span> Refresh
                </button>
                <button id="manageClientsBtn" class="taskbar-btn" title="Manage Clients">
                    <span>⚙</span> Manage Clients
                </button>
                <button id="logoutButton" class="taskbar-btn" title="Logout">
                    <span>⎋</span> Logout
                </button>
            </div>
        </header>

        <div id="message" class="message hidden"></div>

        <!-- Main Content Area -->
        <div id="mainContent">
            <!-- Dashboard View (Default) -->
            <div id="dashboardView" class="dashboard-grid">
                <!-- Client cards will be loaded here dynamically -->
            </div>

            <!-- Management View (Hidden by default) -->
            <div id="managementView" class="management-panel hidden">
                <div class="panel-header">
                    <h2>Client Management</h2>
                    <button id="addClientBtn" class="action-btn">+ Add New Client</button>
                </div>
                <div class="clients-table-container">
                    <table class="clients-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>URL</th>
                                <th>Description</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="clientsTableBody">
                            <!-- Clients will be loaded here dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Client Actions Modal -->
        <div id="clientActionsModal" class="modal hidden">
            <div class="modal-content">
                <span class="close-modal">&times;</span>
                <h2 id="clientModalTitle">Client Actions</h2>
                <div class="modal-actions">
                    <button id="viewClientBtn" class="action-btn">View Dashboard</button>
                    <button id="editClientBtn" class="action-btn">Edit Client</button>
                    <button id="deleteClientBtn" class="action-btn danger">Delete Client</button>
                </div>
            </div>
        </div>

        <!-- Edit Client Modal -->
        <div id="editClientModal" class="modal hidden">
            <div class="modal-content">
                <span class="close-modal">&times;</span>
                <h2>Edit Client</h2>
                <!-- Change this form ID from addClientForm to editClientForm -->
                <form id="editClientForm">
                    <input type="hidden" id="editClientId">
                    <div class="form-group">
                        <label for="editClientName">Client Name:</label>
                        <input type="text" id="editClientName" required>
                    </div>
                    <div class="form-group">
                        <label for="editClientUrl">Dashboard URL:</label>
                        <input type="url" id="editClientUrl" required>
                    </div>
                    <div class="form-group">
                        <label for="editClientDescription">Description:</label>
                        <input type="text" id="editClientDescription">
                    </div>
                    <!-- Add Graylog configuration fields -->
                    <div class="form-group">
                        <label>Graylog Configuration</label>
                        <input type="text" id="editGraylogHost" placeholder="Host:Port">
                        <input type="text" id="editGraylogUsername" placeholder="Username">
                        <input type="password" id="editGraylogPassword" placeholder="Password">
                        <input type="text" id="editGraylogStreamId" placeholder="Stream ID">
                    </div>
                    <button type="submit" class="submit-btn">Update Client</button>
                </form>
            </div>
        </div>

        <!-- Add Client Modal -->
        <div id="addClientModal" class="modal hidden">
            <div class="modal-content">
                <span class="close-modal">&times;</span>
                <h2>Add New Client</h2>
                <form id="addClientForm">
                    <div class="form-group">
                        <label for="clientName">Client Name:</label>
                        <input type="text" id="clientName" required>
                    </div>
                    <div class="form-group">
                        <label for="clientUrl">Dashboard URL:</label>
                        <input type="url" id="clientUrl" required>
                    </div>
                    <div class="form-group">
                        <label for="clientDescription">Description:</label>
                        <input type="text" id="clientDescription">
                    </div>
                    <!-- Add Graylog configuration fields -->
                    <div class="form-group">
                        <label>Graylog Configuration</label>
                        <input type="text" id="graylogHost" placeholder="Host:Port">
                        <input type="text" id="graylogUsername" placeholder="Username">
                        <input type="password" id="graylogPassword" placeholder="Password">
                        <input type="text" id="graylogStreamId" placeholder="Stream ID">
                    </div>
                    <button type="submit" class="submit-btn">Add Client</button>
                </form>
            </div>
        </div>
    </div>
    <div class="news-ticker-container">
        <div class="news-ticker">
            <div class="ticker-content"></div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-left">
                <span class="copyright">© <span id="current-year"></span> Your Company Name. All rights reserved.</span>
                <div class="footer-links">
                    <a href="https://www.vgipl.com/about_vgipl">About Us</a>
                    <a href="https://linkedin.com/yourcompany" target="_blank">LinkedIn</a>
                    <a href="https://www.vgipl.com/contact">Contact Us</a>
                </div>
            </div>
            <div class="footer-right">
                <div class="company-logo-placeholder"></div>
            </div>
        </div>
    </footer>


    <script src="../scripts/auth.js"></script>
    <script src="../scripts/dashboard.js"></script>
    <script src="../scripts/news.js"></script>
</body>

</html>